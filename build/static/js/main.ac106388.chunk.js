(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{40:function(e,t,a){e.exports=a(78)},47:function(e,t,a){},48:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(15),i=a.n(n),r=a(21),s=a(22),o=a(16),c=a(8),l=a(9),u=a(12),m=a(11),g=a(13),d=a(0),f=a.n(d),p=a(33),v=a.n(p),h=a(14),b=a.n(h),w=(a(47),function(e){var t=e.score,a=e.activeCollection,n=e.getActiveCat,i=e.backToMenu,r=e.finalAnswers;return f.a.createElement("div",{className:"Staging"},f.a.createElement("p",{className:"Score"},"Score: ",t),f.a.createElement("ul",{className:"Results-list"},r.map(function(e){var t=e.name,a=e.status;return f.a.createElement("li",{key:t,className:b()("Results",{"Results--skip":"skip"===a})},t)})),f.a.createElement("div",{className:"Results-btnWrap"},a.list.size>0&&f.a.createElement("button",{className:"Results-btn Results-btn--go",onClick:function(){n({cat:a})}},"Play ",a.name," again"),f.a.createElement("button",{className:"Results-btn",onClick:function(){i()}},"New Category")))}),E=a(34),y=a(20),k=(a(48),a(35)),C=a.n(k).a.initializeApp({apiKey:"AIzaSyDMJ-2TjawLbkjbXVl0844mEpmcM5-SDII",authDomain:"wait-up-5ad7e.firebaseapp.com",databaseURL:"https://wait-up-5ad7e.firebaseio.com",projectId:"wait-up-5ad7e",storageBucket:"wait-up-5ad7e.appspot.com",messagingSenderId:"603672906124",appId:"1:603672906124:web:2fcf7a00792f8644"}),S=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={buttons:[],toggleCard:!1},a.logout=function(){C.auth().signOut()},a.toggleBtn=function(e){var t=Object(o.a)(a.state.buttons),n=t.findIndex(function(t){return t.name===e.name});t.forEach(function(e,t){return e.isActive=t===n&&!e.isActive}),a.setState(function(e){return{buttons:t}})},a.getBackBtnText=function(e){return"TRUE"===e.isLocked?"Unlock!":0===e.size?"Empty":"Start"},a.getCategoryURL=function(e){return e.toLowerCase().trim().replace(/\s/g,"-")},a}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.categories.map(function(e){return{name:e.name,isActive:!1,isLocked:e.isLocked}});this.setState({buttons:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.getActiveCat,n=t.categories,i=t.user;return f.a.createElement("div",{className:"Menu"},f.a.createElement("h1",{className:"Menu-title"},"Wait Up!"),i&&i.email&&f.a.createElement("div",{className:""},"Welcome, ",i.email,"! ",f.a.createElement("button",{onClick:this.logout},"Sign Out")),f.a.createElement("div",{className:"Menu-board"},this.state.buttons.length&&n.map(function(t,n){return f.a.createElement("div",{key:t.name,className:b()("Menu-card",{"is-flipped":e.state.buttons[n].isActive,"is-locked":"TRUE"===t.isLocked}),onClick:function(){e.toggleBtn(t)}},f.a.createElement("div",{className:"Menu-side Menu-side--back"},f.a.createElement("p",null,t.description),f.a.createElement("div",{className:"Menu-side-btnWrap"},"TRUE"===t.isLocked?f.a.createElement(y.b,{className:"Menu-side-btn Menu-side-btn--go",to:"/login/".concat(e.getCategoryURL(t.name))},e.getBackBtnText(t)):f.a.createElement(E.a,null,function(n){var i=n.enable,r=n.isOn;return f.a.createElement("button",{className:"Menu-side-btn Menu-side-btn--go",onClick:function(){a({cat:t,enable:i,isOn:r,isLocked:t.isLocked})},disabled:0===t.size},e.getBackBtnText(t))}))),f.a.createElement("div",{className:b()("Menu-side Menu-side--front",{"is-disabled":0===t.size})},t.name,"TRUE"===t.isLocked&&f.a.createElement("div",{className:"Menu-side-saleFlag"},"$0.99!"),f.a.createElement("p",{className:"Menu-info"},"".concat(t.list.size," items left"))))})))}}]),t}(d.Component),N=a(29),O=a.n(N),I=a(39),x=(a(69),function(e){var t=e.inGameTimer,a=e.activeItem,n=e.isAnimating,i=e.removeAnimationClasses,r=t<10,s=(r?"0:0":"0:")+t,o="correct"===n?"https://uploads.codesandbox.io/uploads/user/b8f1fe91-9c56-4aa6-8e4b-be201500d8d0/oyPj-sound_correct.mp3":"https://uploads.codesandbox.io/uploads/user/b8f1fe91-9c56-4aa6-8e4b-be201500d8d0/GgUH-sound_skip.mp3",c="correct"===n?"Correct!":"Skip!";return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{className:b()("Staging",{"Staging--correct":"correct"===n,"Staging--skip":"skip"===n}),onTransitionEnd:i},n&&!I.isIOS&&f.a.createElement(O.a,{url:o,playStatus:O.a.status.PLAYING}),void 0!==a?f.a.createElement("div",{className:"Game-activeItem"},""!==n?c:a):f.a.createElement("p",null,"Category is empty :( ",f.a.createElement("br",null)," Tap to continue"),f.a.createElement("div",{className:b()("Timer",{"is-countdown":r})},s)))}),A=(a(70),function(){return f.a.createElement("svg",{className:"LoadingIcon",xmlns:"http://www.w3.org/2000/svg",width:"200px",height:"200px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",style:{background:"none"}},f.a.createElement("g",{transform:"rotate(0 50 50)"},f.a.createElement("rect",{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#13166f"},f.a.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.9166666666666666s",repeatCount:"indefinite"}))),f.a.createElement("g",{transform:"rotate(30 50 50)"},f.a.createElement("rect",{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#13166f"},f.a.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.8333333333333334s",repeatCount:"indefinite"}))),f.a.createElement("g",{transform:"rotate(60 50 50)"},f.a.createElement("rect",{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#13166f"},f.a.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.75s",repeatCount:"indefinite"}))),f.a.createElement("g",{transform:"rotate(90 50 50)"},f.a.createElement("rect",{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#13166f"},f.a.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.6666666666666666s",repeatCount:"indefinite"}))),f.a.createElement("g",{transform:"rotate(120 50 50)"},f.a.createElement("rect",{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#13166f"},f.a.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.5833333333333334s",repeatCount:"indefinite"}))),f.a.createElement("g",{transform:"rotate(150 50 50)"},f.a.createElement("rect",{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#13166f"},f.a.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.5s",repeatCount:"indefinite"}))),f.a.createElement("g",{transform:"rotate(180 50 50)"},f.a.createElement("rect",{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#13166f"},f.a.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.4166666666666667s",repeatCount:"indefinite"}))),f.a.createElement("g",{transform:"rotate(210 50 50)"},f.a.createElement("rect",{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#13166f"},f.a.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.3333333333333333s",repeatCount:"indefinite"}))),f.a.createElement("g",{transform:"rotate(240 50 50)"},f.a.createElement("rect",{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#13166f"},f.a.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.25s",repeatCount:"indefinite"}))),f.a.createElement("g",{transform:"rotate(270 50 50)"},f.a.createElement("rect",{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#13166f"},f.a.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.16666666666666666s",repeatCount:"indefinite"}))),f.a.createElement("g",{transform:"rotate(300 50 50)"},f.a.createElement("rect",{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#13166f"},f.a.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.08333333333333333s",repeatCount:"indefinite"}))),f.a.createElement("g",{transform:"rotate(330 50 50)"},f.a.createElement("rect",{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#13166f"},f.a.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}))))}),T=a(17),j=a(26),G=a(19),L=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={email:"",password:"",error:""},a.handleChange=function(e){a.setState(Object(j.a)({},e.target.name,e.target.value))},a.login=function(e,t){e.preventDefault(),C.auth().signInWithEmailAndPassword(a.state.email,a.state.password).then(function(){t.push("/")}).catch(function(e){a.setState({error:e.message})})},a.signup=function(e,t){e.preventDefault(),C.auth().createUserWithEmailAndPassword(a.state.email,a.state.password).then(function(){t.push("/")}).catch(function(e){a.setState({error:e.message})})},a.handleSubmit=function(){var e=Object(r.a)(i.a.mark(function e(t,n,r){var s,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.login(t,n),e.prev=2,e.next=5,a.props.stripe.createToken({name:a.state.email});case 5:return s=e.sent,o=s.token,e.next=9,fetch("/api/donate",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({token:o})});case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t,a,n){return e.apply(this,arguments)}}(),a}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return f.a.createElement(T.a,{render:function(t){var a=t.history,n=t.location;return f.a.createElement("div",{className:"Login-wrap"},f.a.createElement("form",{className:"Login",onSubmit:function(t){return e.handleSubmit(t,a,n)}},f.a.createElement("h2",{className:"Login-title"},"Sign up to purchase decks!"),f.a.createElement("input",{type:"email",name:"email",placeholder:"Email",className:"Login-input",onChange:function(t){return e.handleChange(t)}}),f.a.createElement("input",{type:"password",name:"password",placeholder:"Password",className:"Login-input",onChange:function(t){return e.handleChange(t)}}),f.a.createElement("div",{className:"Login-btnWrap"},f.a.createElement(f.a.Fragment,null,f.a.createElement("button",{type:"submit",className:"Login-btn Login-btn--signIn"},"Sign In"),f.a.createElement("button",{className:"Login-btn Login-btn--signUp"},"Sign Up!"))),f.a.createElement(G.CardElement,null),e.state.error&&f.a.createElement("p",null,e.state.error)))}})}}]),t}(d.Component),M=Object(G.injectStripe)(L),R=(a(76),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return f.a.createElement(G.StripeProvider,{apiKey:"pk_test_ZWmVelRqEpVF1yGEpwlPyVIc00BdFJD6I9"},f.a.createElement(G.Elements,null,f.a.createElement(M,null)))}}]),t}(d.Component)),P=(a(77),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function D(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var U,W,z=3,B=3,F=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),g=0;g<n;g++)l[g]=arguments[g];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={isMenu:!0,isStaging:!1,isGameInProgress:!1,isGameOver:!1,isResults:!1,isCountdownInProgress:!1,score:0,finalAnswers:[],categories:{},activeCollection:{},startGameTimer:B+1,inGameTimer:z,activeItem:"",orientation:"positive",blockRotation:!1,isAnimating:"",user:{}},a.onLoad=function(e){for(var t=e.valueRanges[0].values,n=[],i=0;i<t.length;i++){var r={};r.name=t[i][0],r.isLocked=t[i][1],r.description=t[i][2],r.list=new Set(Object(o.a)(t[i].splice(3))),n.push(r)}a.setState({categories:n,activeCollection:n[0]})},a.authListener=function(){C.auth().onAuthStateChanged(function(e){e?a.setState({user:e}):a.setState({user:null})})},a.onDeviceMotion=function(e){(a.state.isStaging||a.state.isGameInProgress)&&e.acceleration.x>35&&(a.resetGame(),a.backToMenu())},a.onDeviceOrientation=function(e){a.state.isGameInProgress&&(Math.abs(e.gamma)<=30&&!a.state.blockRotation&&(e.gamma<0?"positive"===a.state.orientation?a.getNextItem("skip"):a.getNextItem("correct"):"positive"===a.state.orientation?a.getNextItem("correct"):a.getNextItem("skip"),a.setState({blockRotation:!0})),Math.abs(e.gamma)>=70&&a.setState({blockRotation:!1}))},a.onOrientationChange=function(){a.state.isStaging&&(90===window.orientation?(a.setState({orientation:"positive"}),a.startGame()):-90===window.orientation&&(a.setState({orientation:"negative"}),a.startGame()))},a.getActiveCat=function(e){var t=e.isOn,n=e.cat,i=e.enable;!t&&i&&i();var r=Object(s.a)({},n,{list:new Set(n.list)});a.setState({activeCollection:r}),a.goToStaging()},a.onInGameTimerComplete=function(){return new Promise(function(e){U=setInterval(function(){a.setState(function(e){return{inGameTimer:e.inGameTimer-1}}),(a.state.inGameTimer<1||a.state.isGameOver)&&(clearInterval(U),e(!0))},1e3)})},a.resetGame=function(){clearInterval(W),clearInterval(U),void 0!==a.state.activeItem&&a.setState(function(e){return{finalAnswers:[].concat(Object(o.a)(e.finalAnswers),[{name:a.state.activeItem,status:"skip"}])}});var e=new Set(a.state.activeCollection.list);e.delete(a.state.activeItem),a.setState(function(t){return{activeCollection:Object(s.a)({},t.activeCollection,{list:e}),isCountdownInProgress:!1,inGameTimer:z,startGameTimer:B+1,isGameInProgress:!1,isStaging:!1,isGameOver:!1,isResults:!0}})},a.startGame=Object(r.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.onStartCountdownComplete();case 2:return a.setState({isCountdownInProgress:!1,startGameTimer:B+1,isGameInProgress:!0,isMenu:!1,isResults:!1,isStaging:!1}),a.getNextItem(),e.next=6,a.onInGameTimerComplete();case 6:a.resetGame();case 7:case"end":return e.stop()}},e)})),a.makeDecision=function(e){e&&(a.setState(function(t){return{finalAnswers:[].concat(Object(o.a)(t.finalAnswers),[{name:a.state.activeItem,status:e}])}}),"correct"===e?a.setState(function(e){return{score:e.score+1,isAnimating:"correct"}}):a.setState({isAnimating:"skip"}))},a.getRandomItem=function(){var e=Math.floor(Math.random()*a.state.activeCollection.list.size),t=Object(o.a)(a.state.activeCollection.list)[e],n=new Set(a.state.activeCollection.list);n.delete(t);var i=Object(o.a)(a.state.categories);i.splice(i.findIndex(function(e){return e.name===a.state.activeCollection.name}),1,Object(s.a)({},a.state.activeCollection,{list:n})),a.setState(function(e){return{activeItem:t,activeCollection:Object(s.a)({},e.activeCollection,{updatedCollection:n}),categories:i}})},a.getNextItem=function(e){void 0!==a.state.activeItem||0!==a.state.activeCollection.list.size?(a.makeDecision(e),a.getRandomItem()):a.setState({isGameOver:!0})},a.onStartCountdownComplete=function(){return new Promise(function(e){W=setInterval(function(){a.setState(function(e){return{isCountdownInProgress:!0,startGameTimer:e.startGameTimer-1}}),a.state.startGameTimer<1&&(clearInterval(W),e(!0))},1e3)})},a.backToMenu=function(){a.setState({isMenu:!0,isResults:!1,isStaging:!1,score:0,finalAnswers:[]})},a.goToStaging=function(){a.setState({isStaging:!0,isResults:!1,isMenu:!1,score:0,finalAnswers:[]},function(){a.onOrientationChange()})},a.removeAnimationClasses=function(){a.setState({isAnimating:""})},a}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(r.a)(i.a.mark(function e(){var t,a,n,r=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.getItem("categories"),e.next=5;break;case 5:return"AIzaSyAZ1DwWLQtUG4THryaQOohA1GatPSW4bKQ","1zwtuoozCw-8iGHFhJiolPz0Loy4sk17mHffVorw2z1s",t="https://sheets.googleapis.com/v4/spreadsheets/".concat("1zwtuoozCw-8iGHFhJiolPz0Loy4sk17mHffVorw2z1s","/values:batchGet?ranges=categories&majorDimension=COLUMNS&key=").concat("AIzaSyAZ1DwWLQtUG4THryaQOohA1GatPSW4bKQ"),e.next=10,fetch(t);case 10:return a=e.sent,e.next=13,a.json();case 13:n=e.sent,localStorage.setItem("categories",JSON.stringify(n)),this.onLoad(n);case 16:window.addEventListener("orientationchange",this.onOrientationChange),window.addEventListener("deviceorientation",function(e){r.onDeviceOrientation(e)},!0),window.addEventListener("devicemotion",function(e){r.onDeviceMotion(e)});case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this.state.isMenu?document.body.classList.remove("u-noScroll"):document.body.classList.add("u-noScroll")}},{key:"componentWillUnmount",value:function(){var e=this;window.removeEventListener("orientationchange",this.onOrientationChange),window.removeEventListener("deviceorientation",function(t){e.onDeviceOrientation(t)},!0),window.removeEventListener("devicemotion",function(t){e.onDeviceMotion(t)})}},{key:"render",value:function(){return f.a.createElement(y.a,null,f.a.createElement("div",{className:"App"},Object.keys(this.state.categories).length?f.a.createElement(f.a.Fragment,null,this.state.isMenu&&f.a.createElement(S,{getActiveCat:this.getActiveCat,categories:this.state.categories,user:this.state.user}),this.state.isGameInProgress&&f.a.createElement(x,{inGameTimer:this.state.inGameTimer,activeItem:this.state.activeItem,isAnimating:this.state.isAnimating,removeAnimationClasses:this.removeAnimationClasses}),this.state.isResults&&f.a.createElement(w,{score:this.state.score,activeCollection:this.state.activeCollection,getActiveCat:this.getActiveCat,backToMenu:this.backToMenu,finalAnswers:this.state.finalAnswers}),this.state.isStaging&&f.a.createElement("div",{className:"Staging"},this.state.isCountdownInProgress?f.a.createElement("span",{className:"Staging-timerText"},this.state.startGameTimer):f.a.createElement("span",{className:"Staging-text"},"Place on forehead"))):f.a.createElement(f.a.Fragment,null,f.a.createElement(A,null))),f.a.createElement(T.a,{path:"/login",component:R}))}}]),t}(f.a.Component),J=document.getElementById("root");v.a.render(f.a.createElement(F,null),J),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");P?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):D(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):D(t,e)})}}()}},[[40,1,2]]]);
//# sourceMappingURL=main.ac106388.chunk.js.map